---
layout: post
status: publish
published: true
title: London Bus Route Maps
author: Heikki Vesanto
permalink: /london-bus-route-maps/
date: '2014-11-07 12:00:13 +0000'
date_gmt: '2014-11-07 12:00:13 +0000'
---
<p>There are some great features in QGIS 2.6 atlas generation. You can for example filter visible polygons using an attribute from the feature controlling the atlas. So I have a full bus routes extent layer, and one with each direction. The two maps are thus filtered by the full extent layer. Data from Transport for London.</p>
<p>My rules look like:<br />
regexp_substr( group,'(\\w$)') = 1 AND regexp_substr( group,'(\\w+)') = attribute($atlasfeature, 'route') AND $map = 'map1'<br />
and<br />
regexp_substr( group,'(\\w$)') = 2 AND regexp_substr( group,'(\\w+)') = attribute($atlasfeature, 'route') AND $map = 'map2'</p>
<p>Thus we can split the features into the two different maps in the composer. We can filter going and return using the "regexp_substr( group,'(\\w$)') = 1", since our routes are originally names 101-1 for example for the outgoing and 101-2 for the return.</p>
<p>The Vector Map District background map styling is thanks to <a href="https://twitter.com/mixedbredie">Ross</a> : <a href="https://github.com/mixedbredie/QGIS-styles/tree/master/OSVMD/Greyscale">https://github.com/mixedbredie/QGIS-styles/tree/master/OSVMD/Greyscale</a><br />
With slight modifications.</p>
<p>The jpgs are not as good, but Imgur provides hosting:<br />
<a href="https://imgur.com/a/NI6Xb61">All London Bus Routes</a></p>
<p><img class="aligncenter size-large wp-image-1081" src="https://gisforthought.com/media/2014-11-07_route_1_15041287843_o-1024x724.jpg" alt=""/></p>
